"use strict";(self.webpackChunkamplify_login=self.webpackChunkamplify_login||[]).push([[959],{8709:function(e,t,a){var r=a(4165),n=a(5861),l=a(2346),s=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,a,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.signUp({username:t,password:a,attributes:{email:t,locale:n}});case 2:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.resendSignUp(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.confirmSignUp(t,a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),c=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,a,n){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.signIn(t,a);case 2:if("NEW_PASSWORD_REQUIRED"!==(s=e.sent).challengeName){e.next=6;break}return e.next=6,l.g.completeNewPassword(s,a);case 6:if(!n){e.next=11;break}return e.next=9,l.g.rememberDevice();case 9:e.next=13;break;case 11:return e.next=13,l.g.forgetDevice();case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),d=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.forgotPassword(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,a,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.forgotPasswordSubmit(t,a,n);case 2:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.currentAuthenticatedUser();case 2:return t=e.sent,a=t.attributes,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.signOut({global:!0});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.currentAuthenticatedUser();case 2:return a=e.sent,e.next=5,l.g.updateUserAttributes(a,{email:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.verifyCurrentUserAttributeSubmit("email",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,a){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.currentAuthenticatedUser();case 2:return n=e.sent,e.next=5,l.g.changePassword(n,t,a);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.currentAuthenticatedUser();case 2:return a=e.sent,e.next=5,l.g.updateUserAttributes(a,{locale:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={SignUp:s,ResendConfirmationCode:o,ConfirmSignUp:i,SignIn:c,ForgotPassword:d,RedefinePassword:u,GetUser:m,SignOut:p,ChangeEmail:h,ConfirmChangeEmail:x,ChangePassword:f,ChangeLanguage:v};t.Z=g},959:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var r=a(9439),n=a(2791),l=a(5081),s=a(4333),o=a(3081),i=(a(8709),a(7743)),c=(a(3476),a(184)),d=a(4165),u=a(5861),m=a(7689),p=a(2346),h=JSON.parse('[{"label":"AMTD Versante Hotel","value":"amtd_versante_hotel_bc"},{"label":"Hotel Aliance QC","value":"AQFORTH"},{"label":"Best Western Plus Sands","value":"best_western_plus_sands_bc"},{"label":"Best Western Premier Chateau Granville Hotel & Suites & Conf. Centre","value":"best_western_premier_chateau_grandville_bc"},{"label":"Best Western Ville-Marie Montreal Hotel & Suites","value":"best_western_ville_marie_montreal"},{"label":"Comfort Inn Red Deer","value":"confort_inn_red_deer_ab"},{"label":"Comfort Inn Rouyn-Noranda","value":"confort_inn_rouynnoranda"},{"label":"Comfort Inn Sherbrooke","value":"confort_inn_sherbrooke_qc"},{"label":"Comfort Inn Suites","value":"confort_inn_suites"},{"label":"Courtyard Edmonton West","value":"cortyard_edmonton_west_ab"},{"label":"Doubletree Par Hilton A\xe9roport de Montr\xe9al","value":"doubletree_hilton_airport_montreal"},{"label":"Estrimont Suites & Spa","value":"estrimont"},{"label":"Holiday Inn Express Vancouver-Metrotown","value":"holiday_inn_express_metrotown_bc"},{"label":"Hampton Inn & Suites Edmonton West","value":"hampton_inn_suites_edmonton_west_ab"},{"label":"H\xf4tel Clarion Pointe","value":"clarion_pointe"},{"label":"H\xf4tel Expresso Montreal","value":"hotel_expresso_mtl_qc"},{"label":"Imp\xe9ria Hotel & Suites - Boucherville","value":"imperia_hotel_suites_boucherville_qc"},{"label":"Imp\xe9ria Hotel & Suites - St-Eustache","value":"imperia_hotel_suites_steustache_qc"},{"label":"Imp\xe9ria Hotel & Suites - Terrebonne","value":"imperia_hotel_suites_terrebonne_qc"},{"label":"One King West Hotel & Residence","value":"one_king_west_hotel_residences"},{"label":"Quality Inn & Suites Victoriaville","value":"quality_inn_suites_victoriaville"},{"label":"Radisson h\xf4tel Montr\xe9al airport","value":"radisson_montreal_airport"},{"label":"re Stays","value":"restays"},{"label":"River Rock Inn Ontario","value":"river_rock_inn_on"},{"label":"Travelodge By Wyndham Montreal Centre","value":"travelodge_montreal_centre"}]'),x=function(e){var t=e.handleErrors,a=e.setAlert,x=e.setSuccess,f=(0,n.useContext)(o.I).state.user,v=(0,m.bx)(),g=v.loadUser,b=v.setLoading,y=(0,n.useState)(""),j=(0,r.Z)(y,2),N=j[0],_=j[1],P=(0,n.useState)(""),w=(0,r.Z)(P,2),Z=w[0],k=w[1],S=(0,n.useState)(""),C=(0,r.Z)(S,2),I=C[0],F=C[1],A=(0,n.useState)(""),E=(0,r.Z)(A,2),H=E[0],U=E[1],O=(0,n.useState)(""),T=(0,r.Z)(O,2),B=T[0],R=T[1],M=(0,n.useState)(""),W=(0,r.Z)(M,2),D=W[0],q=W[1],G=(0,n.useState)(""),L=(0,r.Z)(G,2),J=L[0],Q=L[1],V=(0,n.useState)(""),z=(0,r.Z)(V,2),K=z[0],X=z[1],Y=(0,n.useState)(""),$=(0,r.Z)(Y,2),ee=$[0],te=$[1],ae=(0,n.useState)(""),re=(0,r.Z)(ae,2),ne=re[0],le=re[1],se=(0,n.useState)(""),oe=(0,r.Z)(se,2),ie=oe[0],ce=oe[1],de=(0,n.useState)(""),ue=(0,r.Z)(de,2),me=ue[0],pe=ue[1],he=(0,n.useState)(""),xe=(0,r.Z)(he,2),fe=xe[0],ve=xe[1],ge=(0,n.useState)(""),be=(0,r.Z)(ge,2),ye=be[0],je=be[1],Ne=(0,n.useState)(""),_e=(0,r.Z)(Ne,2),Pe=_e[0],we=_e[1],Ze=(0,n.useState)(!1),ke=(0,r.Z)(Ze,2),Se=ke[0],Ce=ke[1],Ie=(0,n.useState)(!1),Fe=(0,r.Z)(Ie,2),Ae=Fe[0],Ee=Fe[1],He=(0,n.useState)(!1),Ue=(0,r.Z)(He,2),Oe=Ue[0],Te=Ue[1],Be=h;(0,n.useEffect)((function(){p.g.currentUserInfo().then((function(e){we(e.id)}),(function(e){console.log(e)})),Q("qc"),X("CA"),f&&(console.log("User from DB "+JSON.stringify(f)),_((null===f||void 0===f?void 0:f.gender)||""),k((null===f||void 0===f?void 0:f.firstName)||""),F((null===f||void 0===f?void 0:f.lastName)||""),U((null===f||void 0===f?void 0:f.address)||""),R((null===f||void 0===f?void 0:f.city)||""),q((null===f||void 0===f?void 0:f.postalCode)||""),Q((null===f||void 0===f?void 0:f.province)||""),le((null===f||void 0===f?void 0:f.phone)||""),X((null===f||void 0===f?void 0:f.country)||""),Ee((null===f||void 0===f?void 0:f.agreement)||!1),ce((null===f||void 0===f?void 0:f.banking)||""),pe((null===f||void 0===f?void 0:f.transit)||""),ve((null===f||void 0===f?void 0:f.account)||""),je((null===f||void 0===f?void 0:f.image)||""),te((null===f||void 0===f?void 0:f.hotel)||""),Ce((null===f||void 0===f?void 0:f.ext)||!1),Te((null===f||void 0===f?void 0:f.verified)||!1),we((null===f||void 0===f?void 0:f.shortId)||""))}),[f]);var Re=function(e){console.log("Change Gender "+e.target.value),_(e.target.value)},Me=function(){var e=(0,u.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),x(),b(!0),e.prev=1,console.log("Before updating current user "+JSON.stringify(f)),e.next=5,i.Z.UpdateUser({id:f.id,shortId:Pe,email:f.email,locale:f.locale,gender:N,firstName:Z,lastName:I,address:H,city:B,postalCode:D,province:J,country:K,phone:ne,agreement:Ae,banking:ie,transit:me,account:fe,image:ye,hotel:ee,verified:Oe,ext:Se});case 5:g({force:!0,email:f.email}),console.log("After update"+JSON.stringify(f)),x({title:l.a2[f.locale].Profile.SaveProfileTitle,text:l.a2[f.locale].Profile.SaveProfileText}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error "+JSON.stringify(e.t0)),t(e.t0.message);case 14:b(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return(0,c.jsx)("form",{action:"#",method:"POST",children:(0,c.jsxs)("div",{className:"mt-10 sm:mt-0",children:[(0,c.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[(0,c.jsx)("div",{className:"md:col-span-1",children:(0,c.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,c.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:l.a2[f.locale].Profile.PersonalInfoTitle}),(0,c.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:l.a2[f.locale].Profile.PersonalInfoText})]})}),(0,c.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:(0,c.jsxs)("div",{className:"shadow overflow-hidden sm:rounded-md",children:[(0,c.jsxs)("div",{className:"px-4 py-5 bg-white sm:p-6",children:[(0,c.jsx)(s.t,{handler:je}),(0,c.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-6",children:[(0,c.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.Gender}),(0,c.jsx)("label",{htmlFor:"Woman",className:"text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.GenderWoman}),"\xa0",(0,c.jsx)("input",{type:"radio",name:"gender",value:"woman",id:"woman",checked:"woman"===N,onChange:Re}),"\xa0",(0,c.jsx)("label",{htmlFor:"Men",className:"text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.GenderMan}),"\xa0",(0,c.jsx)("input",{type:"radio",name:"gender",value:"man",id:"man",checked:"man"===N,onChange:Re}),"\xa0",(0,c.jsx)("label",{htmlFor:"Other",className:"text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.GenderOther}),"\xa0",(0,c.jsx)("input",{type:"radio",name:"gender",value:"other",id:"other",checked:"other"===N,onChange:Re})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.FirstName}),(0,c.jsx)(s.II,{type:"text",placeholder:l.a2[f.locale].Profile.FirstName,value:Z,handler:k,error:!Z})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.LastName}),(0,c.jsx)(s.II,{type:"text",placeholder:l.a2[f.locale].Profile.LastName,value:I,handler:F,error:!I})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.Country}),(0,c.jsx)(s.Ph,{value:K,handler:X,children:Object.keys(l.si).map((function(e){return(0,c.jsx)("option",{value:e,children:l.a2[f.locale].Profile.CountryList[e]},e)}))})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.Phone}),(0,c.jsx)(s.LP,{placeholder:l.a2[f.locale].Profile.Phone,value:ne,handler:le,error:!ne})]}),(0,c.jsxs)("div",{className:"col-span-6",children:[(0,c.jsx)("label",{htmlFor:"street_address",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.Address}),(0,c.jsx)(s.II,{type:"text",placeholder:l.a2[f.locale].Profile.Address,value:H,handler:U,error:!H})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-6 lg:col-span-2",children:[(0,c.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.City}),(0,c.jsx)(s.II,{type:"text",placeholder:l.a2[f.locale].Profile.City,value:B,handler:R,error:!B})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3 lg:col-span-2",children:[(0,c.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.Province}),(0,c.jsx)(s.Ph,{value:J,handler:Q,children:Object.keys(l.Fd).map((function(e){return(0,c.jsx)("option",{value:e,children:l.a2[f.locale].Profile.Provinces[e]},e)}))})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3 lg:col-span-2",children:[(0,c.jsx)("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.PostalCode}),(0,c.jsx)(s.II,{type:"text",placeholder:l.a2[f.locale].Profile.PostalCode,value:D,handler:q,error:!D})]}),(0,c.jsx)("div",{className:"col-span-6 sm:col-span-3",children:(0,c.jsx)(s.dg,{value:Ae,handler:Ee,error:!Ae})})]})]}),(0,c.jsx)(s.zx,{text:l.a2[f.locale].Profile.ChangeAttributes,disabled:!Z||!I||!Ae,handler:function(){return Me()},full:!0})]})})]}),(0,c.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-6 childInfoBlock",children:[(0,c.jsx)("div",{className:"md:col-span-1",children:(0,c.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,c.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:l.a2[f.locale].Profile.HotelInfoTitle}),(0,c.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:l.a2[f.locale].Profile.HotelInfoText})]})}),(0,c.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:(0,c.jsxs)("div",{className:"shadow sm:rounded-md",children:[(0,c.jsx)("div",{className:"px-4 py-5 bg-white space-y-6 sm:p-6",children:(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"banking",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.HotelName}),(0,c.jsx)(s.X_,{handler:te,value:Be.filter((function(e){return e.value===ee})),options:Be})]})}),(0,c.jsx)(s.zx,{text:l.a2[f.locale].Profile.ChangeHotel,disabled:!ee,handler:function(){return Me()},full:!0})]})})]}),(0,c.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-6 childInfoBlock",children:[(0,c.jsx)("div",{className:"md:col-span-1",children:(0,c.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,c.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:l.a2[f.locale].Profile.BankingInfoTitle}),(0,c.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:l.a2[f.locale].Profile.BankingInfoText})]})}),(0,c.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:(0,c.jsxs)("div",{className:"shadow sm:rounded-md sm:overflow-hidden",children:[(0,c.jsxs)("div",{className:"px-4 py-5 bg-white space-y-6 sm:p-6",children:[(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"banking",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.FinantialInformationNumber}),(0,c.jsx)(s.II,{type:"text",placeholder:l.a2[f.locale].Profile.FinantialInformationNumber,value:ie,handler:function(e){isNaN(e)||e<0||e.length>3||ce(e)},error:!ie})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"transit",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.FinantialTransitNumber}),(0,c.jsx)(s.II,{type:"text",placeholder:l.a2[f.locale].Profile.FinantialTransitNumber,value:me,handler:function(e){isNaN(e)||e<0||pe(e)},error:!me})]}),(0,c.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"account",className:"block text-sm font-medium text-gray-700",children:l.a2[f.locale].Profile.FinantialAccountNumber}),(0,c.jsx)(s.II,{type:"text",placeholder:l.a2[f.locale].Profile.FinantialAccountNumber,value:fe,handler:function(e){isNaN(e)||e<0||ve(e)},error:!fe})]}),(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:(0,c.jsx)("img",{src:"./cheque-".concat(l.a2[f.locale].lang,".png"),alt:""})})})]}),(0,c.jsx)(s.zx,{text:l.a2[f.locale].Profile.ChangeBanking,disabled:!ie||!me||!fe,handler:function(){return Me()},full:!0})]})})]})]})})};function f(){var e=(0,n.useContext)(o.I).state.user,t=(0,n.useState)(),a=(0,r.Z)(t,2),i=a[0],d=a[1],u=(0,n.useState)(),m=(0,r.Z)(u,2),p=m[0],h=m[1],f=(0,n.useCallback)((function(t){var a=t;switch(t){case"Attempt limit exceeded, please try after some time.":a=l.a2[e.locale].CommonError.AttemptLimit;break;case"An account with the given email already exists.":a=l.a2[e.locale].CommonError.Email;break;case"Invalid verification code provided, please try again.":a=l.a2[e.locale].CommonError.CodeError;break;case"Incorrect username or password.":a=l.a2[e.locale].CommonError.Password;break;case"Password did not conform with policy: Password must have symbol characters":a=l.a2[e.locale].CommonError.NewPassword;break;default:a=t}d({type:"error",text:a})}),[e.locale]);return(0,c.jsxs)("section",{className:"p-4",children:[(0,c.jsx)(s.Dx,{text:l.a2[e.locale].Profile.Profile,back:l.Z6[e.locale].HOME}),(null===i||void 0===i?void 0:i.type)&&(0,c.jsx)(s.bZ,{type:null===i||void 0===i?void 0:i.type,text:null===i||void 0===i?void 0:i.text}),(null===p||void 0===p?void 0:p.title)&&(0,c.jsx)(s.fB,{title:null===p||void 0===p?void 0:p.title,text:null===p||void 0===p?void 0:p.text}),(0,c.jsx)("div",{className:"grid sm:grid-cols-1 gap-2",children:(0,c.jsx)(x,{handleErrors:f,setAlert:d,setSuccess:h})})]})}}}]);
//# sourceMappingURL=959.edc619eb.chunk.js.map