"use strict";(self.webpackChunkamplify_login=self.webpackChunkamplify_login||[]).push([[994],{8709:function(n,e,t){var r=t(4165),a=t(5861),u=t(2346),s=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e,t,a){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.signUp({username:e,password:t,attributes:{email:e,locale:a}});case 2:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),i=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.resendSignUp(e);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e,t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.confirmSignUp(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),o=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e,t,a){var s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.signIn(e,t);case 2:if("NEW_PASSWORD_REQUIRED"!==(s=n.sent).challengeName){n.next=6;break}return n.next=6,u.g.completeNewPassword(s,t);case 6:if(!a){n.next=11;break}return n.next=9,u.g.rememberDevice();case 9:n.next=13;break;case 11:return n.next=13,u.g.forgetDevice();case 13:return n.abrupt("return",s);case 14:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),p=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.forgotPassword(e);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),f=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e,t,a){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.forgotPasswordSubmit(e,t,a);case 2:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),l=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var e,t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.currentAuthenticatedUser();case 2:return e=n.sent,t=e.attributes,n.abrupt("return",t);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),m=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.signOut({global:!0});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),d=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.currentAuthenticatedUser();case 2:return t=n.sent,n.next=5,u.g.updateUserAttributes(t,{email:e});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.verifyCurrentUserAttributeSubmit("email",e);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),g=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e,t){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.currentAuthenticatedUser();case 2:return a=n.sent,n.next=5,u.g.changePassword(a,e,t);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),h=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.g.currentAuthenticatedUser();case 2:return t=n.sent,n.next=5,u.g.updateUserAttributes(t,{locale:e});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),v={SignUp:s,ResendConfirmationCode:i,ConfirmSignUp:c,SignIn:o,ForgotPassword:p,RedefinePassword:f,GetUser:l,SignOut:m,ChangeEmail:d,ConfirmChangeEmail:x,ChangePassword:g,ChangeLanguage:h};e.Z=v},6994:function(n,e,t){t.r(e),t.d(e,{default:function(){return v}});var r=t(4165),a=t(5861),u=t(9439),s=t(2791),i=t(7689),c=t(3081),o=t(5081),p=t(8709),f=t(2215),l=t(9068),m=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.b.graphql((0,l.wT)("\n  query UserByEmail(\n    $email: AWSEmail!\n    $sortDirection: ModelSortDirection\n    $filter: ModelUserFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    userByEmail(\n      email: $email\n      sortDirection: $sortDirection\n      filter: $filter\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        id\n        locale\n        email\n        name\n        internalId\n        birthdate\n        gender\n        firstName\n        lastName\n        address\n        city\n        postalCode\n        province\n        country\n        phone\n        agreement\n        image\n        banking\n        transit\n        account\n        verified\n        export\n        ext\n        hotel\n        shortId\n        _version\n        createdAt\n        updatedAt\n        owner\n      }\n      nextToken\n    }\n  }\n",{email:e}));case 2:return t=n.sent,n.abrupt("return",t.data.userByEmail.items.length?t.data.userByEmail.items[0]:null);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),d={GetUserByEmail:m},x=t(7743),g=t(4333),h=t(184);function v(){var n=(0,s.useContext)(c.I),e=n.state,t=n.dispatch,f=(0,i.s0)(),l=(0,s.useState)(!1),m=(0,u.Z)(l,2),v=m[0],Z=m[1],w=(0,s.useCallback)(function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var u,s,i,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=a.force,s=a.email,i=a.locale,e.user&&!0!==u){n.next=11;break}return n.next=4,d.GetUserByEmail(s);case 4:if(c=n.sent){n.next=9;break}return n.next=8,x.Z.CreateUser(s,i);case 8:c=n.sent;case 9:t({type:o.vK.UPDATE_LANG,payload:i||c.locale}),t({type:o.vK.UPDATE_USER,payload:c});case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]),y=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.Z.SignOut();case 2:t({type:o.vK.UPDATE_LANG,payload:e.user.locale}),t({type:o.vK.UPDATE_USER,payload:null}),f(o.Z6[e.lang].SIGN_IN);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,s.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.Z.GetUser();case 3:return t=n.sent,n.next=6,w({email:t.email,locale:t.locale});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),f(o.Z6[e.lang].SIGN_IN);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();n()}),[]),e.user?(0,h.jsxs)("main",{className:"mx-auto h-screen",children:[v&&(0,h.jsx)(g.gb,{}),(0,h.jsx)(g.JL,{handleSignOut:y}),(0,h.jsx)("div",{className:"mx-auto max-w-screen-lg p-4",children:(0,h.jsx)(i.j3,{context:{loadUser:w,setLoading:Z}})})]}):(0,h.jsx)(g.gb,{})}}}]);
//# sourceMappingURL=994.d3928142.chunk.js.map